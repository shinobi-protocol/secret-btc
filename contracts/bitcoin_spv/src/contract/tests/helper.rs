use super::*;
use bitcoin::hash_types::{BlockHash, TxMerkleNode};
use bitcoin::hashes::Hash;
use bitcoin::util::uint::Uint256;
use bitcoin::BlockHeader;
use bitcoin_header_chain::header_chain::is_valid_proof_of_work_hash;
use cosmwasm_std::{BlockInfo, Coin, ContractInfo, Env, Extern, HumanAddr, MessageInfo};
use rand::{thread_rng, Rng};
use shared_types::bitcoin_spv::InitMsg;
use std::string::ToString;

pub fn mock_env<U: Into<HumanAddr>>(sender: U, sent: &[Coin]) -> Env {
    Env {
        block: BlockInfo {
            height: 12_345,
            // change time
            time: mock_timestamp() as u64,
            chain_id: "cosmos-testnet-14002".to_string(),
        },
        message: MessageInfo {
            sender: sender.into(),
            sent_funds: sent.to_vec(),
        },
        contract: ContractInfo {
            address: HumanAddr::from(MOCK_CONTRACT_ADDR),
        },
        contract_key: Some("".to_string()),
        contract_code_hash: "".to_string(),
    }
}

pub fn mock_timestamp() -> u32 {
    1_610_794_295
}

pub fn init_helper() -> Extern<MockStorage, MockApi, MockQuerier> {
    let mut deps = mock_dependencies(20, &[]);
    let env = mock_env("instantiator", &[]);

    let init_msg = InitMsg {
        bitcoin_network: "regtest".to_string(),
        initial_header: None,
        confirmation: 6,
    };
    init(&mut deps, env, init_msg).unwrap();
    deps
}

pub fn regtest_block_header(height: usize) -> Vec<u8> {
    let hex_str = match height {
        1 => "0000002006226e46111a0b59caaf126043eb5bbf28c34f3a5e332a1fc7b2b73cf188910fa91a4843caf4eb5dd4d006ca93a0b01faefeeeaf2fba7364f9af8bee08900f2a25c50260ffff7f2002000000",
        2 => "00000020a727d6a2149461752f4d8ce4bd8918f650b24752bf04aca0affeb25f9870eb582dc6bbdfe95f30c4b2ffe982f034ffdd392a8057d2c64336a34fb9f57def116326c50260ffff7f2004000000",
        3 => "000000201a73d72785e2a2bdea339a23d3a14479517453bd1d176114b96e846a1be24412ba2c9f196189bb52e8648944c6f4500546f0590d418270317c00a51cb85a6e5426c50260ffff7f2002000000",
        4 => "00000020707ff6ebfbceef693a795c9f4b9c6992e4157f7e40d198b6d5693b7e6f69416adc5eb911ff45939bf978265a86bbfc3194cd2e7172b83aba4b7c6c735655e7b027c50260ffff7f2000000000",
        5 => "00000020b3a9ead591a984bc9b491d03e544f3d2361035b55e11e9ab52a64f39535dda03607bb2f09ce03fc154508411b9d3ff6a75d447a929361f5e36e675f12ea6eebb27c50260ffff7f2000000000",
        6 => "000000202b03fbad4815b6f38aa7317514b6ce5dd7ae94d575c9d8e2a1b509871ceb6a1d206dc0df3e31da0c22da0af731ca02b96e49d52d7cf5da82b80c2a127577aada27c50260ffff7f2000000000",
        7 => "0000002073d4ed0e3ca13389a3f8b23c742deb816983155756cd1057140050777b306475539c6fd9fe8ae52d9a313df6f3c81112c98dc1b1ee7eb53ba91907568b3c2bd427c50260ffff7f2005000000",
        8 => "00000020fc03158273f804018c4f2bb3a51048ab9a4072bb4eac9cf22302f7eb3f50a73af4432e79a73c24950d87670290489fe463eaf227192423a73316e15511b99f9d28c50260ffff7f2000000000",
        9 => "00000020c7a0551afe921ea24919b3f1b6d0753af8e702205fcf7fafed96a0e323046b432438582fe5c1e4480b88b0a2fd1c214c6669ac102b064706f239ba2050c30f7128c50260ffff7f2001000000",
        10 => "00000020c77bfc5dbc4fe5e84563ba9bdaaa1b4e72c2488e61eba6ddb09e48913a5c8f4945a510600d43aabf9ad8d9b9f8893942c85b2207ea73f0e8ebb0db0adbd337c628c50260ffff7f2000000000",
        11 => "00000020952f08bac628f30c3392e4f2d6e26a918a930ce2c4aad654e86c317a7a7f8d2463b56b8e4260bdc8bd8f5b6b8ece7305e1bac86c672877f22cfd4eab7d0c65be28c50260ffff7f2000000000",
        12 => "000000205a265da612f36f53e1232d30cb92939b544c303fe956a9099f9ddd31a7d8bb7333dc175554fb68dbd7a02554c147c23e78046e17fc3657e421d7e050c17c8bf528c50260ffff7f2003000000",
        13 => "00000020b5f2de0a69756987ef64017baf286c5220a633dd761ac5bde2b10c18aac4c03ad4db2fe1b25a0491f5c749dd3fd90a972c86e6962617be0871e989544b90d27128c50260ffff7f2000000000",
        14 => "00000020f4f3c0469ac1144d5ce53c6c8888bdee1c1d4d0fe717136e462d5ec505f86225f712b85a57de44428c1baf48f409d1cafa4645de928e3af1da3c89076bca922e29c50260ffff7f2000000000",
        15 => "000000204e127e7d4165fb7b2f959f5e3ac790c625ca16719cedd11af0644698a5f00b6db83357ab7ff7f5d30a1e1f83262651b4e32d65b1bfd4080f532a735b73db247329c50260ffff7f2000000000",
        16 => "00000020ed8d8a780fd83bfc38e66c5fa751bc1cb8f4f138ec660e4c1c89b65ea99fff50a8a74f3f65a59b3ac9e0b4bb99a568343ed87751a04104fadfc13fe6a3fa9ba529c50260ffff7f2001000000",
        17 => "000000208190ca4160901db2974d00c404c7de59477085909ef6b4d05d4b6c1adf6199406714832f2d2a000a83462e782e8171c78fe4101e2f78f290f12291ae95c7040c29c50260ffff7f2004000000",
        18 => "00000020e446241e98a58b798d6b3ebec51a8283f0f7882334b2f52dea64770205f7e26507c510d7b206e15adb5560886bfef36646aceeef4fb82794720519fa94a01bba29c50260ffff7f2000000000",
        19 => "00000020289e947d49925ee594016a551fa9f524a143f6fcfca40d864f471c715339a6108736aee3fce86f04659786cf4cf4b406e115a5b14b6214d69f32fccd680f447729c50260ffff7f2000000000",
        20 => "0000002026ba0811774b2cc5c70877e6414e6e3acb8e59047118e024315b66a2d34e462517293b4d3a2d2a70e78fd5428a0211787e43568cfad21ac0d72d23a65d55cb652ac50260ffff7f2000000000",
        21 => "00000020224bf62768dca2edfcfb8196759c902b7054ef29a77b7585261eb747ffd86a42e9d7ac5f11cf2e05b706ee6cfa246ecabd44de9129799508f554d59fcb0472912ac50260ffff7f2000000000",
        22 => "0000002027718ddb15f4b92db2a5179314620660b7e9f17a66bd2352bc742f576ede4378147fc0d3b28597c6b81222dccfde4f90207241e1155cdf0d64c535496360fb112ac50260ffff7f2000000000",
        23 => "000000200f0d22689dca3a2404385f092c53a7fde6230c58d72fbffd19f43c06cd1c09590bf936b3b0d9ad62b31ce4c51663287564fffcfb16a472e2cc12bf8e9051919f2ac50260ffff7f2000000000",
        24 => "00000020dfe011b885364e81746410165fba95d57ebd780a2c5eed59b31dbe4b18c1036a71ace7fd47f251bee544ae239ce8ad636f543861f52e5a01b47a460fc44146242ac50260ffff7f2000000000",
        25 => "0000002082e4bda7420d7e42ec973a5cdcd27188ad381fd2a3c937d7a62dd6b16bd8e4113544c72d7b2a0475f473800e90634646308499b9aafeb495cd37e60422164cc42ac50260ffff7f2000000000",
        26 => "00000020ffeecef96eb8d475e74444320b96e4f7cbf4c65a60aae86a9169ac243e7c7866a540792b632dd0beea50033816f177064d7937862fe6925ad702b55a8a182f202bc50260ffff7f2004000000",
        27 => "000000208ae1985f264c6558d76c17618a4e3427d76c99950090709a870c07f2347910309710fb8f6691150e705e97696c1f0c8f3345706b8d1a33b4bfab646ecf5ca95f2bc50260ffff7f2000000000",
        28 => "000000206b62399534d9947d20c9ac51fa51bb5caab9972e7f79599d87026b05b8dcd0679f4300d14e2e71c64caabff42d160b95a2869b134b8ea9d7cbaaca2654efdcdf2bc50260ffff7f2001000000",
        29 => "0000002067cceb5e91dd66f9cfa613ee27bae36f9de65e15a17304bc509e334d2f4f955dbe35b1da3771cd31a63a493c8ba5df2dfa471611c1bf8b77b45d2f26a03695a62bc50260ffff7f2004000000",
        30 => "000000200a6d1d1f4b0bed847389493cce0b822b0a49351471a966fb9a31574bf395b87fefe5ba7cd048077cd10b811061b12d2daf130130273b938c2b328dd0a01bc3372bc50260ffff7f2000000000",
        31 => "00000020169b0f7d50959fb0ecd87dda70712581c3c1a5785a6d7a0055e9aa77b9e4fd1b57d9eefa56ad4450ce85b0f91d3e9bdae126ae44e84e39e41975fb3184a3c2bd2bc50260ffff7f2003000000",
        32 => "000000208c03f81b374e2e8f820f08ac957327b65c669b3c1d519135c37ccd35c17fb42d2a3051eb031346f05833b9b96370293c298556a9133a02e08316b397a6c2f8e72cc50260ffff7f2001000000",
        33 => "00000020fd0967c6c3e6fc40e677f43041098def5df0d7062b96469a8db2eb6a218b5a59b849a00ee97040dc6babefe62e0c094a106594e079da736749807ff1e464ce352cc50260ffff7f2000000000",
        34 => "00000020d7cb2786fd3ca88884e40175f042c27f3bdc43d20cc5f9e8e6c1656c9ffb3e5909a9c0ba972dc7f959503b0999f6be464855c7ace443839a8cba67c26b5f8a722cc50260ffff7f2000000000",
        35 => "00000020ffac2a43c3b30f4da23a68ce75da1ad9247cc4c8660a5fc8dfea5a3e2078c72ff0bc2accd68b6a08020399a82c362b3c45a5b49d9f537b9666343d376d89a5a82cc50260ffff7f2002000000",
        36 => "00000020dbbc38bb52e9acdda72144cbe02b23b757979fe9234b8bf79b493973fc482f441bd9dbe58a767c261aad0aa08b79a85f72f378c6b7a50f760f4240baeeae50652cc50260ffff7f2000000000",
        37 => "0000002056f6363f38d740263c3c0b87372084eecb6825439fbfbf06811d82a4ed412671775c9e8e5f7c3deb21677e9ef91d42204167fd7b5f4e21cc9bd0d8f12edd8fa32cc50260ffff7f2000000000",
        38 => "0000002028a37dc5dcacda632a933d0d7a506027381efa7535dde2da237446ea6c066527ad80b5d4111039f0073113d3dee092b334b7bf3bf3a00b520ef82292c4082df02dc50260ffff7f2001000000",
        39 => "00000020aa6f7edab52ffc9506759e770feef6b081b61c81ea6c5d6f738787ce157bd634b102959f3e3aeecc7f88219caa9d79d4cb4fac1aa4bd337a0267293e214987f42dc50260ffff7f2001000000",
        40 => "000000206f87bb7174dd5a8b59218c2b3bc27dc94e56c2546834c1175bf0472d46620e3ddc12c1933fdabfe4f09cff3899de1e8916650f2fe2d33e77e7cd74c32bb25baa2dc50260ffff7f2001000000",
        41 => "0000002044229a933e3c5802a69250fc81c674ecc116595a62dcd7962f18900d215631203878f70afcc17bcebc416bd64d333c7f16d4fe11ffb2eae5957a889cd1f9f01f2dc50260ffff7f2000000000",
        42 => "000000206b68c89f275b1d40b53a33d43861f017b60c1e6e44751e4f769b379a57cf1212963095bb908c98023e14b5a4a322a07531fe4ccf304182bd88394592b64ea3da2dc50260ffff7f2000000000",
        43 => "000000203a7800b3bb1f0963b738ed34ba02a18aeca3cd9c0a196b9ac2208aa28a588b0b13b21cf0f52a9e131da16a80ce9d05b7cc1414cf05b47408a43a69e70dbd1b8c2dc50260ffff7f2001000000",
        44 => "000000200c4379cc9db369b1c8d7e454c4e0f7c20fbeb59bee604453bb49b1c36d573c4ecbbe044f73b0c47275107fdb648b38989a3ede451c49661a93a6f8d7373c70bc2ec50260ffff7f2003000000",
        45 => "00000020c2c41879339376a59494c63d1d688823ae3562be00bd36efd4cd2150bbab855ccc26a8744e1c4a0272e31f44f328c9e8b9050bd1c0360aee8adf207d1ef6bd402ec50260ffff7f2000000000",
        46 => "00000020cb80151c1419bd7f9658d88e90e7bb6fc5dfa3a91f3e0c4ebfd4af862cbb7e6f8f728226309541bce716ae4d120bc1d6b8abecc7f4026ade78d0eb4f1e0869c32ec50260ffff7f2000000000",
        47 => "00000020140ecc9fb166f6f74a7e547de40d954dd8b3a8ce75288065de1ec54f1b98780403d83a81adb09af02d9174febd0aab50f77d099e50278091ca1c0f4be83168f92ec50260ffff7f2001000000",
        48 => "00000020584391d17dea4022dd2d48a290c1a9cbb47438dbb92b0a1f825a21143bbf1746b21a057e81b8c5410c3fca5bad8262b2905635eacee1b80e798276e794b155a12ec50260ffff7f2000000000",
        49 => "00000020681bdc2e6a3653212ac7f3e862ef3fbd9212f51fa540af5f4f47f29a90cbfb6e6a8750d56d31afcf9edc9f2a6dad4df104784aaa6b721fceb8214c65e094d9e22ec50260ffff7f2000000000",
        50 => "00000020a8327c72048216310845eba162634bef8a219f7e11926252e469ac7ecb5d545647de311b7047e9d8b8757c48409446cd012c0db077716e3be7a13f427246e0f92fc50260ffff7f2000000000",
        51 => "00000020c1676ce6694ef9480eec3755ee5e5b91c7aa0794625d937ceed8b7d47343314f1b320c34aa29a40e370618ec8463d7280b5bc7d95fe94983a5c48d0d7cd9b0f82fc50260ffff7f2000000000",
        52 => "0000002066fd8f5fc4ea34a79b8965e117acca56fd84e249f1ee594a92eda808dba1aa6c79bee2eef512d9d8483202f8cbffc5d0b22be1d7537306547e6b5ea4168e43ef2fc50260ffff7f2002000000",
        53 => "0000002079ab93e7cecd216b2941e9968e55267e092d5439a4251f24e78adc1aaaa5012d74e1c9069a8514c549365fda660f3f038958157102b12087b99395918ece77722fc50260ffff7f2002000000",
        54 => "000000207fdfbc6ae2eab9963add6099944b55c608ad2a401cc3d59e54db9a6d9f651015d5e3c31bcffffa4e52675050cb7d08a73807b5a17d07adc7d2fc5845f50d37982fc50260ffff7f2000000000",
        55 => "000000204dd0a2277cf170ec0bd47081a12e9cbc6a64706c49abdd1427f7dfc2fd3ff02bd1271dbae4e1ae38e6a4977297308fa7ff28bdf07f244451f8f38229508055e62fc50260ffff7f2002000000",
        56 => "0000002009d8beff03f1607421939a676d67ee3605db65e245dbaecb5633403744b1f55a0096c5b11370053d4cc92826713cd6ec9b80fe8f3f26b0fe50a82fccc53c3bf530c50260ffff7f2001000000",
        57 => "000000209409bb388a11be3012fd7ceb95dd1b1a7b669bfeee1228e2c8b349d46e7c664694d8d3981be096c1a48d0d60193f0e787d4c06578afabd01f86e4342b80dbe1030c50260ffff7f2004000000",
        58 => "00000020765ed4680a6b6dafd673646658d1adf80fe288bd81f772d0c649f0ade07b367fbd38bd0bb2832e6fa580de2d6fd803579c0d8602a502599c683cfa1e345a5d5230c50260ffff7f2000000000",
        59 => "000000203eddad66227971280cb24b41416ee2168f1760906e094de352ff64f9793ff2070ab73fd70167633a161ba4bf1bb4e1eb40f290f47e33144842c016a3f7ecc3d330c50260ffff7f2001000000",
        60 => "00000020574cc8867a35e09b4243c18c5219475433fda31740d89a67ea79ed250f51e22abbe7155f50019ecd19484dcce4e1eac8ed50408385f48d09dc4317351b56641130c50260ffff7f2000000000",
        61 => "00000020444fe9e14418b42936e4cbdabb38d2b92f47d3920f321c9007469880a6cdca33facfae87585b6dc57f683af5e73cf815d0dde8dc8297f94dc6a4d2d6e0cf3c0730c50260ffff7f2000000000",
        62 => "0000002092a0a17dac98bce87f55db9dfaef5dcdd3529b5676dea8d5e1aa2788222e616672e8ff0ebe788c6648ff7fc5b7ee96dd91b783e5f20df4bbf68ac900a004b2ec31c50260ffff7f2004000000",
        63 => "00000020125fa8c8cea9657d954c3b7d02ee464a229875e21e284e880b81fa335a664a1c3ec1515785de57421b834ff2387aedab6b6f667f946760221ef70f13d14a817331c50260ffff7f2000000000",
        64 => "0000002032c90edb6e68e88e542c43d84ab798644b8a17d554881d641cda17c1413d8952469f899e70ce5401231a1c8b9dde06c90e24ceeb133cdec5490361d2c281518231c50260ffff7f2000000000",
        65 => "00000020b3ca46b1dfcbce0cf6d26b0d826c72b500f735601f1d4ae1aae82a2e96844d2a63001cf097b35d8eb0defb3acd1f9cb46780fcade0d3635f464f47f1b54a3b7a31c50260ffff7f2001000000",
        66 => "000000204ade27dca6d75650999e1202e93863969377aa6214b363156f1375ea3e56be21899a23bb269c8de90864085b26c569505af8068a99679e6372b9d79325a394b331c50260ffff7f2000000000",
        67 => "00000020e1d8e023bc64c2f60e2e802a73518f6ef1c49617470e8bee0f4e399075e8887650bf83c7794e1a8731a671ff9cdb4f8e41420f8113d2a686ec392be0d7ed791d31c50260ffff7f2000000000",
        68 => "000000208c320054510163660fee06bbe7534764c71c24d9a6cd24cbded520d1723056174a2cd058067f05a3ec4556544a07717abd138dd30367f69f966854b2d8a09d8d32c50260ffff7f2000000000",
        69 => "00000020bf32f1571dedaa32d234b79a3347165d323dda5b4ac27c87d82a32cf16c31b18b0acd7019b5a8480e04380808f23040999f6390c4fd0a9f30c1c4d447365614532c50260ffff7f2002000000",
        70 => "00000020ae8f66280f1200596d8dd3e41556ce680256423c04d39766b4d0b8274c0a390664b08a6621ac18d0908bb28d48cd198142b7866fe2ba9502880e94c14b621aaa32c50260ffff7f2002000000",
        71 => "0000002043bed1fa29dc479178c03771c3aadf5715974cc3cb959a64808dae16d2104c5aad2398ef78acf4327254a94ffb8ba09099f99f75f342e6832f89fb0eaeb7fb7632c50260ffff7f2000000000",
        72 => "00000020fcace6e0df486f946e925b58acce81af96d522e25aba3f34cd04f0e39801b708f57bae5a01d3cf4b80ea98a32060eb673c8b088e1ceea37025fa87e9d25777cf32c50260ffff7f2000000000",
        73 => "0000002029562a057cd29581f1b354c6cce79e96318ef5f776a6af60c695aec5a8b7d75e765e4adb9cbfbe176593b3cd2385ac7043bca06eb9f6760f0bb5ff15c791824132c50260ffff7f2000000000",
        74 => "000000205c36bc77bffc57fd3a7693152c6be0142ac6d09f41de8876ebe9845e29642915e424a7d42d287354783d0774b5186fe6ec838c62baa377cd80592b2d810e5cf633c50260ffff7f2002000000",
        75 => "000000201afb61670a31971e1b62f33d85b41f5840a0c5ba2f08ca22bc57bd702a363678cbab3a453956dd151ce389725a229640f9f59919c336826c1ebeda4b1a291bdc33c50260ffff7f2000000000",
        76 => "000000209146f1d631fb1f037795bd93509d0653c4b8b0144f788bfa59d7f4e96ae92d2aadc4d0b7f336bc8cea5ce7bc92c5a79ab74b1efaceb5d1aa8f1ba1a14aa863a333c50260ffff7f2000000000",
        77 => "00000020410efc826f82d3f88bb5c55d378b28c3c939c1b7ad5f8f02006ccce14fb5d617df098b8821a097cb7e0c9c1938b5de35991d536f540d376c2e9191f517ac58c533c50260ffff7f2000000000",
        78 => "000000205fcd483a6f4c0cb39396efd1ffe712618a9a2da21553db1d50cb84e30c4fb400ef63a271d2ea3230cc03ff2d0dc8bbd86b85fc5e98c34609b40dc16ba7b716e333c50260ffff7f2001000000",
        79 => "000000200f83342f27c87d5b766a554c34df3e1b96a75d0e111f4b2cc8bcb4d6688135660748d1f4ad1e23caff794cd38b57df8655386eb1d9f84368849db9e04e2c898c33c50260ffff7f2003000000",
        80 => "00000020a5f9a88a7ad7cb1f2cd633542583a4b52fb3e88b604aea12fed425042a3336423b6a6a1b95bcc84f83f38f4c85eb7902e5ec38b32aa29c607a90a504fd6c8c4534c50260ffff7f2001000000",
        81 => "000000206d6147d1a3088139e2e36b65bf802c1c030a1b76a00048d6459a79c40abf9069b44b9ad7cb2b826548cdcb8df23e56f3633cfaef950c3a19ab6e1ab6ce628d6334c50260ffff7f2000000000",
        82 => "0000002045510523fb1e1113bd86289961f87f02321172848878b815b6e375ed008d6c623d9b3c098b262eafef27b73216b41c9cd5941243fb56fbad5d8c00a4262e74bf34c50260ffff7f2000000000",
        83 => "000000204bcd5bd9bcd04d7c6c821902e59c966fb82152d6654bb5edd8b1f001400c66179374b0e1a4da024b4028a371df3e7517ca08c8cf360b46ba3cf9d6852525cb1a34c50260ffff7f2004000000",
        84 => "000000203026d8b8e864f1e9236b36515e41094c39d2dde90ead2760d6c03608c92e7d5ed66b02a4c9754324809dbac3fd2d2e5e76c7df931ab0ed2549ff92bad7c865c734c50260ffff7f2000000000",
        85 => "00000020abf317f749d6ab52e73b8d814f20bf64920ae5e8df7021f3ebbf5aad1c52e764b0ebeaccfe91a559cc8c7def6619bbbb1ec33f5ec6c5a291b79ee880c532d1bb34c50260ffff7f2000000000",
        86 => "00000020e68511db766a10f1db4afdfe429bbe47555683c8de9dfd1294426c571a000b40057437ce61deecf2f297b881cad9cf44cefd296ae0e6cf21e0b77a7319f5b23d35c50260ffff7f2000000000",
        87 => "0000002015912531b729a0c09f3a74488b72e9e7d8c49536713f7ced5dcfa3fdaf911e6b3bd9ca650fa1064776e6c83e4f4dc16afc2f71b973be5b6330b48a52a754d49c35c50260ffff7f2001000000",
        88 => "00000020b6701c1e102761cbc79496814318b45dd2fd3bc7077a7b0c316905a472042d628bf0522e0c35e38dc2d47a112ee05d32564da7065f554ae005ea37a2818a01a035c50260ffff7f2000000000",
        89 => "00000020cf3fe14a4d8e03fa5858b2bbb534319afa4c131c003ce9031949ab9071e7024b6a2b200a967b73cf1821e6018f6e1bc2a2f971de4d5061045426b2d25332c72a35c50260ffff7f2000000000",
        90 => "0000002075ccff6c380b898ac3f3f701450ee1833e0247c55bffc9a72c644f705c3632272fb7668ce46b362147994cea3a97beb3a8eb597027a4a03273e83940c96f198435c50260ffff7f2001000000",
        91 => "0000002061482a1c26bbe9e7525700f8659ab5a74a01cc203a2567342d4e581e528b5f043516ece824ebc6299b981f27bcae45a666cba87ca0c6a20f7116dc0782da74de35c50260ffff7f2002000000",
        92 => "00000020adba07360f3ccc350b6202f4e197bc73ab0be3ea9efb145a9c475892ffa45a5a251638e234ca8b19dc083db11b554b77c91018184cbe3e5bdf80d495a8bdb4e036c50260ffff7f2000000000",
        93 => "00000020f80b2b7704ae02f3e50e2087f236238312fe2e305f672d81afda8a0fc5993c70994f1f12362e7798dab7914202490eaaf9761101d3a9f9367559cbea041c91cd36c50260ffff7f2000000000",
        94 => "0000002026e7eee115103cb31aeb9c4cc5c20fc17c000732a0698615028667c5e353581b81567d29fc1162e599acef593195ad5fa94cb50442ef7e947581897e805f882036c50260ffff7f2005000000",
        95 => "0000002069883cfae4fdcd1db7c1a63182b3be650a97d7db3b727668624572c378cb290e1241f2c5bf8cdfe87b2685ada0ad0f554432a0b03deefffebf0368fea816309b36c50260ffff7f2002000000",
        96 => "0000002017b5a5da47d38cdeeb17997a83895c5a4313b0183b5c82e7855465a6a459b5354ae806fbc6a019dd029bb1c6497365a6d164de3a323cf535afd9c3830c27d90b36c50260ffff7f2000000000",
        97 => "00000020bbaf96efb0cf14ba9b148d90b60572ac803b69424436f3522d6f36b78a191f2049fb9315c79f88ea39542d2d2fdaae820366fc828847d9a34a4a1edff593931736c50260ffff7f2000000000",
        98 => "00000020011bf72732977bed0e49b86306032317a0facd6e812650fc04dcd5749bade838b20ca4577c399237a77420c3a008f9fe201d41467b3aa5ca5170a483246a5b4b37c50260ffff7f2000000000",
        99 => "00000020c9441ab70493d8ed98c4077c14c52bb4de275081469d69270b583e9bbde7de567f118d84af9538586e6557e6bb04633c989d9f7f679c2b47783decf8935f6f3937c50260ffff7f2001000000",
        100 => "000000207cfe7691f42df3735d0eb29523db0c3b55e9bb65361a482f4364ac1ecd6614440fada835037c2b154230c92bec381e182e33ac83bb5b3613daf614cbfb96581f37c50260ffff7f2000000000",
        101 => "000000200a351e23b46ec78bef77084ab1aafe4e30f4432b444f695b4bdf91c2ad1b0932a25fee79c8fba2f1796d5cdb131a43c1c225cd62440da389292d28948e28a47437c50260ffff7f2000000000", // mint tx 7eef2fce7934260ebd103d179fb8936ae4bee2baa199aa1cc9b7b67a04706ac0
        102 => "000000208ca3cdedcb9ee6e9216b6777d2b35fedb3dd5a5d745db205cb71c98736fe94724a9568a9452d4781f0ec53015d739f046a5c97b6dd60905bc7c105a68cf5f65c92c50260ffff7f2000000000",
        _ => panic!("no block header"),
    };
    hex::decode(hex_str).unwrap()
}

pub fn random_merkle_root() -> TxMerkleNode {
    let bytes: [u8; 32] = thread_rng().gen();
    TxMerkleNode::from_inner(bytes)
}

pub fn gen_block_header(
    prev_blockhash: BlockHash,
    time: u32,
    target: Uint256,
    merkle_root: TxMerkleNode,
) -> BlockHeader {
    let bits = BlockHeader::compact_target_from_u256(&target);
    let mut header = BlockHeader {
        version: 1,
        prev_blockhash,
        merkle_root,
        time,
        bits,
        nonce: 0,
    };
    loop {
        if is_valid_proof_of_work_hash(&target, &header.block_hash()) {
            return header;
        }
        header.nonce += 1;
    }
}
